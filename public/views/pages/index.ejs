<!DOCTYPE html>
<html lang="id">
  <head>
    <%- include('../partials/head'); %>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <!-- Navbar -->
    <header><%- include('../partials/navbar'); %></header>

    <!-- Search Bar -->
    <div class="mt-32"><%- include('../partials/searchbar'); %></div>

    <main class="max-w-screen-xl mx-auto px-4 mt-12">
      <!-- Swiper Section -->
      <section class="swiper rounded-xl overflow-hidden">
        <div class="swiper-wrapper">
          <!-- swiper include -->
          <%- include('../partials/swiper'); %>
        </div>
        <div class="swiper-pagination mt-4"></div>
      </section>
    </main>

    <section class="mx-20 px-4 py-12 grid sm:grid-cols-2 md:grid-cols-4 gap-6">
      <%- include('../partials/menu', { text: 'Bencana Alam', image: 'bencana', link: '/cari/bencana-alam'
      }) %>
      <!-- Bencana -->
      <%- include('../partials/menu', { text: 'Bantuan Sosial', image: 'sosial', link: '/cari/bantuan-sosial'
      }) %>
      <!-- Sosial -->
      <%- include('../partials/menu', { text: 'Bantuan Medis', image: 'medis', link: '/cari/bantuan-medis'
      })%>
      <!-- Medis -->
      <%- include('../partials/menu', { text: 'Lingkungan', image: 'lingkungan', link: '/cari/lingkungan'
      }) %>
      <!-- Lingkungan -->
    </section>

    <!-- Rand -->
    <section class="bg-primary mb-5 py-10 px-6 md:px-16 rounded-xl mx-4 sm:mx-20 lg:mx-40">
      <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl text-white font-semibold">Donasi Kita</h1>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6">
        <% random.forEach((item) => { %>
          <%- include('../partials/card', {
            id_issue: item.id_issue,
            thumbnail: item.thumbnail,
            pembuat: item.username,
            nama_issue: item.nama_issue,
            terkumpul: item.terkumpulFormatted,
            progress: item.progress
          }) %>
        <% }) %>
      </div>
    </section>

    <!-- Banner -->
    <section class="mt-10"><%- include('../partials/banner'); %></section>
    <%- include('../partials/footer'); %>
    
    <!-- SwiperJS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

    <!-- Init Swiper and Menu Toggle -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        new Swiper(".swiper", {
          loop: true,
          autoplay: {
            delay: 5000,
            disableOnInteraction: false,
          },
          pagination: {
            el: ".swiper-pagination",
            clickable: true,
          },
        });

        const toggleBtn = document.getElementById("menu-toggle");
        const mobileMenu = document.getElementById("mobile-menu");

        if (toggleBtn && mobileMenu) {
          toggleBtn.addEventListener("click", () => {
            mobileMenu.classList.toggle("hidden");
          });
        }
      });
    </script>
  </body>
</html>
