<!DOCTYPE html>
<html lang="id">
  <head>
    <%- include('../partials/head'); %>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <!-- Navbar -->
    <header><%- include('../partials/navbar'); %></header>

    <!-- Search Bar -->
    <div class="mt-32"><%- include('../partials/searchbar'); %></div>

    <main class="max-w-screen-xl mx-auto px-4 mt-12">
      <!-- Swiper Section -->
      <section class="swiper rounded-xl overflow-hidden">
        <div class="swiper-wrapper">
          <!-- swiper include -->
          <%- include('../partials/swiper'); %>
        </div>
        <div class="swiper-pagination mt-4"></div>
      </section>
    </main>

    <section class="mx-20 px-4 py-12 grid sm:grid-cols-2 md:grid-cols-4 gap-6">
      <%- include('../partials/menu', { text: 'Bencana Alam', image: 'bencana'
      }) %>
      <!-- Bencana -->
      <%- include('../partials/menu', { text: 'Bantuan Sosial', image: 'sosial'
      }) %>
      <!-- Sosial -->
      <%- include('../partials/menu', { text: 'Bantuan Medis', image: 'medis' })
      %>
      <!-- Medis -->
      <%- include('../partials/menu', { text: 'Lingkungan', image: 'lingkungan'
      }) %>
      <!-- Lingkungan -->
    </section>
    
    <!-- Campaign Pilihan -->
    <section class="bg-primary py-10 px-6 md:px-16 rounded-xl mx-4 sm:mx-20 lg:mx-40">
      <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl text-white font-semibold">Campaign Pilihan</h1>
        <a
          href="/cari/Campaign-Pilihan"
          class="text-sm font-medium md:text-base text-white border border-white px-4 py-2 rounded-full hover:bg-white hover:text-primary transition-colors"
        >
          Lihat Lainnya
        </a>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6">
        <% issues.forEach((item) => { %>
          <% include('../partials/card', {
            link: '/detail/' + item.id_issue,
            image: item.thumbnail,
            creator: 'Lembaga #' + item.id_lembaga, // opsional
            title: item.nama_issue,
            amount: item.target.toLocaleString('id-ID'),
            progress: item.progress
          }) %>
        <% }) %>
      </div>
    </section>

    <!-- Kebutuhan Mendesak -->
    <section class="bg-primary py-10 px-6 md:px-16 rounded-xl mx-4 sm:mx-20 lg:mx-40 mt-12">
      <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl text-white font-semibold">Kebutuhan Mendesak</h1>
        <a
          href="/search/"
          class="text-sm font-medium md:text-base text-white border border-white px-4 py-2 rounded-full hover:bg-white hover:text-primary transition-colors"
        >
          Lihat Lainnya
        </a>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6">
        <% random.forEach((item) => { %>
          <% include('../partials/card', {
            link: '/detail/' + item.id_issue,
            image: item.thumbnail,
            creator: 'Lembaga #' + item.id_lembaga, // opsional
            title: item.nama_issue,
            amount: item.target.toLocaleString('id-ID'),
            progress: item.progress
          }) %>
        <% }) %>
      </div>
    </section>

    <!-- Banner -->
    <section class="mt-10"><%- include('../partials/banner'); %></section>
    <%- include('../partials/footer'); %>

    <!-- SwiperJS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

    <!-- Init Swiper and Menu Toggle -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        new Swiper(".swiper", {
          loop: true,
          autoplay: {
            delay: 5000,
            disableOnInteraction: false,
          },
          pagination: {
            el: ".swiper-pagination",
            clickable: true,
          },
        });

        const toggleBtn = document.getElementById("menu-toggle");
        const mobileMenu = document.getElementById("mobile-menu");

        if (toggleBtn && mobileMenu) {
          toggleBtn.addEventListener("click", () => {
            mobileMenu.classList.toggle("hidden");
          });
        }
      });
    </script>
  </body>
</html>
